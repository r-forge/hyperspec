{
  "keyboard_shortcut": "", 
  "name": "dput result", 
  "language": "JavaScript", 
  "trigger_enabled": false, 
  "value": [
    "/**", 
    " * cbinsert insert result and comment sign after <- and before function call ", 
    " * TODO: does not yet work with multiline commands ", 
    " * @param x The text to insert ", 
    " * @param sci   The scimoz object", 
    " */", 
    "", 
    "function cbinsert (x, sci) {", 
    "    if (x != \"\") {   ", 
    "        var pos = Math.min (sci.anchor, sci.currentPos);", 
    "        sci.insertText (pos, \" \" + x + \" # \")", 
    "    }", 
    "}", 
    "", 
    "sci = ko.views.manager.currentView.scimoz;", 
    "selStart = Math.min(sci.anchor, sci.currentPos);", 
    "selEnd = Math.max(sci.anchor, sci.currentPos);", 
    "// find assignment before", 
    "if (sci.selText == \"\"){", 
    "    sci.gotoPos (selStart);", 
    "    Find_FindNextInMacro(window, 0, '<-', 0, 0, true, false, find, false, true); ", 
    "    selStart = sci.currentPos;", 
    "}", 
    "", 
    "// expand to end of line", 
    "sci.gotoPos(selEnd);", 
    "sci.lineEnd();", 
    "selEnd = sci.currentPos;", 
    "", 
    "sci.setSel(selStart, selEnd);", 
    "res = sv.r.evalCallback (\"dput (\\n\" + sci.selText + \"\\n)\", cbinsert, sci = sci) ", 
    "// \\n is important in case there is a comment at the end of the line"
  ], 
  "trigger": "trigger_postopen", 
  "rank": 100, 
  "version": "1.0.7", 
  "async": false, 
  "type": "macro"
}